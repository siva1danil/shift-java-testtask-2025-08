# DataSorter

## Об утилите

Утилита для фильтрации содержимого файлов по типам данных. На вход подаются текстовые файлы, утилита распределяет их строки по выходным файлам в зависимости от категории. Поддерживаемые типы данных:

| Тип данных      | Выходной файл    | Примеры                             |
|-----------------|------------------|-------------------------------------|
| Целые числа     | integers.txt     | 0, 123, +1, -1                      |
| Вещественные    | floats.txt       | 0.0, 1., .1, +1., -1., 1e10, .1e-10 |
| Строки          | strings.txt      | abc, text                           |

<details>
  <summary>Подробное опиание</summary>

  При запуске утилиты в командной строке перечисляется несколько файлов, содержащих в перемешку целые числа, строки и вещественные числа. В качестве разделителя используется перевод строки. Строки из файлов читаются по очереди в соответствии с их перечислением в командной строке.

  Задача утилиты - записать разные типы данных в разные файлы. Целые числа в один выходной файл, вещественные в другой, строки - в третий. По умолчанию файлы с результатами располагаются в текущей папке с именами `integers.txt`, `floats.txt`, `strings.txt`. Дополнительно с помощью опции `-o` можно задавать путь для результатов. Опция `-p` задает префикс имен выходных файлов. Например `-o /some/path -p result_` задают вывод в файлы `/some/path/result_integers.txt`, `/some/path/result_strings.txt` и т.д. По умолчанию файлы результатов перезаписываются. С помощью опции `-a` можно задать режим добавления в существующие файлы.

  Файлы с результатами создаются по мере необходимости. Если какого-то типа данных во входящих файлах нет, выходной файл создан не будет. В процессе фильтрации для каждого типа данных собирается статистика. Поддерживается вывод статистики двух видов: краткая и полная. Выбор производится опциями `-s` и `-f` соответственно.

  Краткая статистика содержит только количество записанных элементов. Полная статистика для чисел дополнительно содержит минимальное и максимальное значения, сумму и среднее. Полная статистика для строк, помимо их количества, содержит также размер самой короткой и самой длинной строк. При передаче опций `-s` или `-f`, статистика выводится в консоль.

  Программа обрабатывает возможные ошибки, сообщает о них пользователю и продолжает работу со следующего файла/строки. Для реализации используется язык программирования Java с системой сборки Gradle. Внешние библиотеки не используются. Инструкция по запуску указана ниже.
</details>

## Требования

**Java**: Java 21+ (проект тестировался на Eclipse Adoptium 21.0.5 LTS)

**Система сборки**: Gradle 8.8

## Сборка и запуск

Для сборки выполните из корня репозитория:

```
./gradlew clean jar
```

Скомпилированный jar-файл появится по пути:

```
app/build/libs/app.jar
```

Для запуска может быть использована следующая команда:

```
java -jar app/build/libs/app.jar [опции] file1.txt file2.txt ...
```

Возможные опции:

| Описание                | Опция                                                              |
|-------------------------|--------------------------------------------------------------------|
| -a                      | Дополнять выходные файлы, если они существуют (вместо перезаписи)  |
| -s                      | Показать краткую статистику по обработанным данным                 |
| -f                      | Показать полную статистику (имеет приоритет над -s)                |
| -o `<путь>`             | Директория для выходных файлов (по умолчанию - текущая директория) |
| -p `<префикс>`          | Префикс для имен выходных файлов (по умолчанию - пустой)           |
| file1.txt file2.txt ... | Имена входных текстовых файлов для обработки                       |

Ошибки чтения файлов (нет доступа, файл не найден) выводятся в консоль, программа продолжает обработку со следующего файла.

## Примеры работы

### Пример 1

| Файл/Действие         | Содержимое |
|-----------------------|-|
| `in1.txt`             | <code>Lorem ipsum dolor sit amet<br>45<br>Пример<br>3.1415<br>consectetur adipiscing<br>-0.001<br>тестовое задание<br>100500</code> |
| `in2.txt`             | <code>Нормальная форма числа с плавающей запятой<br>1.528535047E-25<br>Long<br>1234567890123456789</code> |
| Запуск                | <code>$ java -jar app.jar -s -a -p sample- in1.txt in2.txt<br>Завершено успешно.<br><br>Целые числа:        количество=3<br>Вещественные числа: количество=3<br>Строки:             количество=6<br></code> |
| `sample-integers.txt` | <code>45<br>100500<br>1234567890123456789</code> |
| `sample-floats.txt`   | <code>3.1415<br>-0.001<br>1.528535047E-25</code> |
| `sample-strings.txt`  | <code>Lorem ipsum dolor sit amet<br>Пример<br>consectetur adipiscing<br>тестовое задание<br>Нормальная форма числа с плавающей запятой<br>Long</code> |

### Пример 2

| Файл/Действие       | Содержимое |
|---------------------|-|
| `in1.txt`           | <code>0<br>123<br>+1<br>-1<br>0.0<br>1.<br>.1<br>+1.<br>-1.<br>1e10<br>.1e-10<br>abc<br>text</code> |
| Запуск              | <code>$ java -jar app.jar -f -a in.txt<br>Завершено успешно.<br><br>Целые числа:        количество=4, мин=-1, макс=123, сумма=123, сред=31<br>Вещественные числа: количество=7, мин=-1, макс=10000000000, сумма=10000000001.10000000001, сред=1428571428.72857142857<br>Строки:             количество=2, мин.длина=3, макс.длина=4<br></code> |
| `integers.txt`      | <code>0<br>123<br>+1<br>-1</code> |
| `floats.txt`        | <code>0.0<br>1.<br>.1<br>+1.<br>-1.<br>1e10<br>.1e-10</code> |
| `strings.txt`       | <code>abc<br>text</code> |